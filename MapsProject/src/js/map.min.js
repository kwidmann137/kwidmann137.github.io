function initMap(){window.onload=function(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:29.494119,lng:-98.705823},zoom:12}),bounds=new google.maps.LatLngBounds,defaultFeaturedIcon="./images/featuredIcon.png",selectedFeaturedIcon="./images/selectedIcon.png",defaultIcon="./images/defaultIcon.png",selectedIcon="./images/selectedIcon.png",largeInfoWindow=new google.maps.InfoWindow,createFeaturedLocation("Golf Club of Texas, San Antonio, TX"),createFeaturedLocation("Lone Star Crossfit, San Antonio, TX"),createFeaturedLocation("Top Golf, San Antonio, TX"),createFeaturedLocation("K1 Speed, San Antonio, TX"),createFeaturedLocation("Mission San Jose Church, San Antonio, TX"),createFeaturedLocation("The Alamo, San Antonio, TX"),createFeaturedLocation("Government Canyon, San Antonio, TX")}}function createFeaturedLocation(e){function n(e,n){if(n==google.maps.places.PlacesServiceStatus.OK)for(var o=0;o<e.length;o++){var a=new google.maps.Marker({map:map,position:e[o].geometry.location,name:e[o].name,animation:google.maps.Animation.DROP,id:e[o].place_id,icon:defaultFeaturedIcon});yelpSearch("San Antonio",e[o].name,e[o],a,"featured"),bounds.extend(e[o].geometry.location)}map.fitBounds(bounds)}var o={query:e,bounds:map.getBounds()},a=new google.maps.places.PlacesService(map);a.textSearch(o,n)}function mapSearch(e){function n(e,n){if(n==google.maps.places.PlacesServiceStatus.OK)for(var o=0;o<e.length;o++){var a=new google.maps.Marker({map:map,position:e[o].geometry.location,name:e[o].name,animation:google.maps.Animation.DROP,id:e[o].place_id,icon:defaultIcon});yelpSearch("San Antonio",e[o].name,e[o],a,"search"),bounds.extend(e[o].geometry.location)}map.fitBounds(bounds)}var o={query:e,bounds:map.getBounds()},a=new google.maps.places.PlacesService(map);a.textSearch(o,n)}function mapClearMarker(e){e.setMap(null)}function mapSetMarker(e){e.setMap(map),bounds.extend(e.position),map.fitBounds(bounds)}function mapAnimateMarker(e,n){"search"==n?(e.setAnimation(google.maps.Animation.BOUNCE),e.setIcon(selectedIcon),setTimeout(function(){e.setAnimation(null),e.setIcon(defaultIcon)},3e3)):"featured"==n&&(e.setAnimation(google.maps.Animation.BOUNCE),e.setIcon(selectedFeaturedIcon),setTimeout(function(){e.setAnimation(null),e.setIcon(defaultFeaturedIcon)},3e3))}function populateInfoWindow(e,n,o,a){if(n.marker!=e){n.marker=e;var t=infoWindowContent.replace("%name%",a.name),i="undefined"!=typeof a.photos?a.photos[0].getUrl({maxWidth:150,maxHeight:150}):"";t=t.replace("%src%",i);var c=null!==o?o.snippet_text:"Not Available...";t=t.replace("%yelpReview%",c),n.setContent(t),n.open(map,e),n.addListener("closeclick",function(){this.marker=null},n)}}function mapAddCompletedFeaturedLocation(e,n,o){null!=e&&e.name!=n.name&&n.formatted_address.toLowerCase().search(e.location.address[0].toLowerCase())<0&&(e=null),o.addListener("click",function(){populateInfoWindow(this,largeInfoWindow,e,n)}),myVM.addFeaturedLocation(e,n,o)}function mapAddCompletedSearchLocation(e,n,o){null!=e&&e.name!=n.name&&n.formatted_address.toLowerCase().search(e.location.address[0].toLowerCase())<0&&(e=null),o.addListener("click",function(){populateInfoWindow(this,largeInfoWindow,e,n)}),myVM.addSearchResult(e,n,o)}var map,bounds,defaultFeaturedIcon,selectedFeaturedIcon,defaultIcon,selectedIcon,largeInfoWindow,infoWindowContent='<div class="row infoWindowRow"><h3>%name%</h3></div><div class="row infoWindowRow"><p class="col-xs-7">Yelp Review: %yelpReview% </p><img class="col-xs-5 img-responsive" src="%src%"></div>';