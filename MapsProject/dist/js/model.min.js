var viewModel=function(){var e=this;e.searchKeyword=ko.observable(""),e.listHidden=ko.observable(!0),e.listLocations=ko.observableArray([]),e.featuredLocations=ko.observableArray([]),e.listEmpty=ko.observable(!1),e.toggleList=function(){e.listHidden()?e.listHidden(!1):e.listHidden(!0)},e.search=function(){""!=e.searchKeyword()&&(e.listLocations().forEach(function(e,t){mapClearMarker(e.marker())}),e.listLocations.removeAll(),mapSearch(e.searchKeyword()),e.searchKeyword(""))},e.addSearchResult=function(a,o,s){var r="undefined"!=typeof o.photos?o.photos[0].getUrl({maxWidth:150,maxHeight:150}):"",i=new t(a,o.formatted_address,o.geometry,o.name,r,o.place_id,o.rating,o.types,s,"search");e.listLocations.push(i)};var t=function(e,t,a,o,s,r,i,n,l,h){this.address=ko.observable(t),this.location=ko.observable(a),this.name=ko.observable(o),this.photoURL=ko.observable(s),this.id=ko.observable(r),this.rating=ko.observable(i),this.types=ko.observableArray(n),this.marker=ko.observable(l),this.match=ko.observable(!0),this.type=ko.observable(h),this.expanded=ko.observable(!1),this.expandDetailsText=ko.observable("See More Details..."),null!=e?(this.hasYelpDetails=ko.observable(!0),this.yelpNumberOfReviews=ko.observable(e.review_count),this.yelpReviewSnippet=ko.observable(e.snippet_text),this.yelpURL=ko.observable(e.url),this.yelpRating=ko.observable(e.rating)):this.hasYelpDetails=ko.observable(!1)};e.addFeaturedLocation=function(a,o,s){var r="undefined"!=typeof o.photos?o.photos[0].getUrl({maxWidth:150,maxHeight:150}):"",i=new t(a,o.formatted_address,o.geometry,o.name,r,o.place_id,o.rating,o.types,s,"featured");e.featuredLocations.push(i),e.listLocations.push(i)},e.filterList=function(){e.listLocations().forEach(function(t,a){t.match(!1),t.name().toLowerCase().search(e.searchKeyword().toLowerCase())>=0&&(console.log("name matched"),t.match(!0)),t.types().forEach(function(t,a){t.toLowerCase().search(e.searchKeyword().toLowerCase())>=0&&this.match(!0)},t),t.address().toLowerCase().search(e.searchKeyword().toLowerCase())>=0&&t.match(!0),0==t.match()?mapClearMarker(t.marker()):mapSetMarker(t.marker())}),e.noResults(),e.searchKeyword("")},e.restoreFeatured=function(){e.listLocations().forEach(function(e,t){mapClearMarker(e.marker())}),e.listLocations.removeAll(),e.listLocations(e.featuredLocations().slice(0)),e.listLocations().forEach(function(e,t){e.match(!0),mapSetMarker(e.marker())})},e.animateMarker=function(){mapAnimateMarker(this.marker(),this.type())},e.expandDetails=function(){this.expanded()?this.expanded(!1):this.expanded(!0),"See More Details..."==this.expandDetailsText()?this.expandDetailsText("Hide Details..."):this.expandDetailsText("See More Details...")},e.noResults=function(){e.listEmpty(!0),e.listLocations().forEach(function(t,a){1==t.match()&&e.listEmpty(!1)})}},myVM=new viewModel;ko.applyBindings(myVM);